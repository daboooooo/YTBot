# 多角色功能测试检查清单

## Phase 1: 测试环境准备
- [x] YTBot 服务正常运行
- [x] ffmpeg 可用性检查通过
- [x] yt-dlp 版本检查通过
- [x] Nextcloud 连接状态正常（或本地存储配置正确）
- [x] Telegram Bot 可正常接收消息

## Phase 2: YouTube 音频下载测试
- [x] 测试链接正确识别为 YouTube 内容
- [x] 视频信息正确获取（标题：HWASA - Good Goodbye）
- [x] 用户选择"音频"选项正常工作
- [x] 格式选择逻辑正确（选择最高比特率格式）
- [x] 下载过程正常，进度反馈清晰
- [x] 音频文件成功下载
- [x] 文件正确上传到存储服务（Nextcloud 或本地）
- [x] 返回正确的文件访问路径

## Phase 3: YouTube 视频下载测试
- [x] 测试链接正确识别为 YouTube 内容
- [x] 视频信息正确获取
- [x] 用户选择"视频"选项正常工作
- [x] 格式选择逻辑正确（选择 1080p 或最高画质）
- [x] 视频和音频流同时下载
- [x] ffmpeg 合并过程成功
- [x] 最终 MP4 文件质量符合预期
- [x] 文件正确上传到存储服务
- [x] 返回正确的文件访问路径

## Phase 4: Twitter/X 长文内容测试
- [x] 测试链接正确识别为 Twitter/X 内容
- [x] 推文标题正确提取
- [x] 长文内容完整抓取（无截断）
- [x] 内容过滤正确（无 analytics、广告、推荐等）
- [x] 文本格式正确保留（加粗、链接等）
- [x] Markdown 文件正确生成
- [x] 文件正确上传到存储服务
- [x] 返回正确的文件访问路径

## Phase 5: 错误场景测试
- [x] 无效链接返回友好错误提示
- [x] 网络错误时正确重试或回退
- [x] Nextcloud 不可用时自动切换到本地存储
- [x] 缓存队列正确记录待上传文件
- [x] 错误日志完整记录

## Phase 6: 测试报告
- [x] 所有测试结果已记录
- [x] 测试通过率已统计
- [x] 失败用例和原因已列出
- [x] 改进建议已提供
- [x] 测试报告已完成
